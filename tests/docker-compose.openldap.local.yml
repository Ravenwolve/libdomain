services:
  directory:
    build: openldap-container
    container_name: directory-server
    hostname: dc0
    environment:
      PORT: 3890
    ports:
      - '3890:3890'
      - '6360:6360'
    restart: "no"
    volumes:
      - cert-volume:/certs
    healthcheck:
      test: ldapsearch -H ldap://127.0.0.1:3890 -x -b '' -s base
      interval: 60s
      timeout: 15s
      retries: 5

volumes:
  cert-volume:
    external: true
